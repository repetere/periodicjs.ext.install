<% include ../shared/header %>
<% include ../shared/nav %>
	<div class="_pea-container">
		<div class="_pea-row">
			<div class="_pea-col-span10 _pea-col-nofloat">
					<div class="_pea-row _pea-container-forminput _pea-text-center">
						<h1 class="_pea-h1-logo">
							<img src="/images/brand/periodic-favicon.png"/>
						</h1>
					</div>
				<div class="_pea-document">
					<form action="/install/updateconfig" method="post" autocomplete="on" id="install_form" name="login_form" class="_pea-form _pea-ajaxforms" data-blockdefaultsuccess="true" data-successfunction="successFormPost">
						<input type="hidden" name="_csrf" value="<%= locals.token %>" >
						<div class="_pea-row _pea-container-forminput  no-margin">
							<h2 class="_pea-text-center">Configure your Application Environment</h2>
							<div class="_pea-col-span12">
								<div class="_pea-row _pea-container-forminput">
									<label class="_pea-col-span3 _pea-label _pea-text-right">Application Name<a class="_pea-toottip pop-tooltip" data-id="tt-appname">[?]</a></label>
									<input class="_pea-col-span9 noFormSubmit" type="text" placeholder="Application name" value="Periodicjs" name="appname"/>
								</div>
								<div class="_pea-row _pea-container-forminput">
									<label class="_pea-col-span3 _pea-label _pea-text-right">MongoDB Connection URL <a class="_pea-toottip pop-tooltip" data-id="tt-mongodb">[?]</a></label>
									<input class="_pea-col-span9 noFormSubmit" type="text" value="<%= pagedata.databaseurl%>" disabled="disabled" name="mongoconnectionurl"/>
								</div>
								<div class="_pea-row _pea-container-forminput">
									<label class="_pea-col-span3 _pea-label _pea-text-right">Cookie Parser <a class="_pea-toottip pop-tooltip" data-id="tt-cookieparser">[?]</a></label>
									<input class="_pea-col-span9 noFormSubmit" type="text" placeholder="<%= pagedata.cookieparser %>" value="<%= pagedata.cookieparser %>" name="cookieparser"/>
								</div>
								<div class="_pea-row _pea-container-forminput">
									<label class="_pea-col-span3 _pea-label _pea-text-right">Application Session Type <a class="_pea-toottip pop-tooltip" data-id="tt-sessions">[?]</a></label>
									<% var docstatus = [{
										"value":"mongo",
										"label":"Mongo Based Sessions"
										},{
										"value":"cookie",
										"label":"Cookie Based Sessions"
										},{
										"value":"false",
										"label":"Do not use sessions"
										}]; %>
									<select name="sessions" class="_pea-col-span9">
										<% docstatus.forEach(function(status){ %>
											<option value="<%= status.value %>"><%= status.label %></option>
										<% }); %>
									</select>
								</div>
								<div class="_pea-row _pea-container-forminput">
									<label class="_pea-col-span3 _pea-label _pea-text-right">Template Engine <a class="_pea-toottip pop-tooltip" data-id="tt-template">[?]</a></label>
									<% var docstatus = [{
										"value":"ejs",
										"label":"EJS"
										}]; 
									%>
									<select name="template" class="_pea-col-span9">
										<% docstatus.forEach(function(status){ %>
											<option value="<%= status.value %>"><%= status.label %></option>
										<% }); %>
									</select>
								</div>
<!-- 								<div class="_pea-row _pea-container-forminput">
									<label class="_pea-col-span3 _pea-label _pea-text-right">Install Theme <a class="_pea-toottip pop-tooltip" data-id="tt-theme">[?]</a></label>
									<% var docstatus = [{
										"value":"minimal",
										"label":"Minimal"
										},{
										"value":"philosophiae",
										"label":"Philosophiae"
										},{
										"value":"",
										"label":"Do not install a theme"
										}]; %>
									<select name="theme" class="_pea-col-span9">
										<% docstatus.forEach(function(status){ %>
											<option value="<%= status.value %>"><%= status.label %></option>
										<% }); %>
									</select>
								</div> -->
								<div class="_pea-row _pea-container-forminput">
									<label class="_pea-col-span3 _pea-label _pea-text-right">Install Admin <a class="_pea-toottip pop-tooltip" data-id="tt-admin">[?]</a></label>
									<% var docstatus = [{
										"value":"true",
										"label":"yes"
										},{
										"value":"false",
										"label":"no"
										}]; %>
									<select name="admin" id="install-admin-select" class="_pea-col-span9">
										<% docstatus.forEach(function(status){ %>
											<option value="<%= status.value %>"><%= status.label %></option>
										<% }); %>
									</select>
									<div class="_pea-row _pea-container-forminput  no-margin">
										<div class="_pea-col-span3"></div>
										<div class="_pea-col-span9 _pea-pull-right" style="padding-top: .5em; background: #fbfbfb;">
											<div id="admin-install-info">
												<div class="_pea-row _pea-container-forminput">
													<label class="_pea-col-span3 _pea-label _pea-text-right">Email </label>
													<input class="_pea-col-span6 noFormSubmit" type="text" placeholder="name@domain.com" value="" name="email"/>
												</div>
												<div class="_pea-row _pea-container-forminput">
													<label class="_pea-col-span3 _pea-label _pea-text-right">Username </label>
													<input class="_pea-col-span6 noFormSubmit" type="text" placeholder="admin" value="" name="username"/>
												</div>
												<div class="_pea-row _pea-container-forminput">
													<label class="_pea-col-span3 _pea-label _pea-text-right">Password</label>
													<input class="_pea-col-span6 noFormSubmit" type="text" placeholder="<%= pagedata.temppassword %>" value="<%= pagedata.temppassword %>" name="password"/>
												</div>
												<div class="_pea-row _pea-container-forminput">
													<label class="_pea-col-span3 _pea-label _pea-text-right">Confirm Password</label>
													<input class="_pea-col-span6 noFormSubmit" type="password" placeholder="" value="" name="passwordconfirm"/>
												</div>
											</div>
										</div>
									</div>
								</div>
								<div class="_pea-row _pea-container-forminput no-margin _pea-text-center">
									<input class="_pea-button noFormSubmit _pea-color-success _pea-reg-size" type="submit" value="Get Started" name="install_perdiocjs_button">
								</div>
							</div>				
						</div>
					</form>
				</div>
				<div id="install-console" class="_pea-hidden">
					<div class="_pea_row">
						<div class="_pea-col-span12">
							<h2>Console Output 
							<!-- <small><a id="hide-install-console" class="">(hide)</a></small> -->
							</h2>
						</div>
					</div>
					<div class="_pea_row">
						<div class="_pea-col-span12 _pea-console" id="install-console-output">
						</div>
						<hr/>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div style="display:none;">
		<div id="tt-appname" data-title="Application Name">
			<p>Pick a name, make it stick.</p>
			<p>For full documentation on configuring periodicjs configuration, see <a href="http://getperiodic.com/docs"><em>Periodic configuration</em></a>.
			</p>
		</div>
		<div id="tt-mongodb" data-title="MongoDB Connection URI">
			<p>Periodicjs requires a mongodb database to store documents, <strong class="_pea-color-error">update "content/config/database.js" to update your mongo settings</strong></p>
			<p>For help installing locally check out <a href="http://docs.mongodb.org/manual/installation/">Installing MongoDB Locally</a> or use a free mongo hosting server like <a href="https://mongolab.com/">MongoLab</a></p>
			<p>The standard format of the MongoDB connection URI used to connect to a MongoDB database server. The format is the same forall official MongoDB drivers.</p>
			<p> For full documentation on connection URIs, see <a href="http://docs.mongodb.org/manual/reference/connection-string/"><em>MongoDB Connection String URI Format</em></a>.
			</p>
		</div>
		<div id="tt-cookieparser" data-title="Cookie Parser">
			<p>An HTTP cookie, web cookie, or browser cookie, is a small piece of data sent from a website and stored in a user's web browser while the user is browsing that website. Every time the user loads the website, the browser sends the cookie back to the server to notify the website of the user's previous activity. Cookies were designed to be a reliable mechanism for websites to remember stateful information (such as items in a shopping cart) or logging in. <a href="http://en.wikipedia.org/wiki/HTTP_cookie">HTTP cookie</a></p>
			<p>Parse Cookie header and populate req.cookies with an object keyed by the cookie names. Optionally you may enable signed cookie support by passing a secret string, which assigns req.secret so it may be used by other middleware.</p>
			<p> For full documentation on Cookie Parser, see <a href="https://github.com/expressjs/cookie-parser/"><em>expressjs/cookie-parser</em></a>.
			</p>
		</div>
		<div id="tt-sessions" data-title="Application Session Type">
			<p>Since sessions use cookies to keep track users we need both the cookie parser and the session framework. We also provide a secret to the session initializer, which provides a little more security for our session data.</p>
			<p>Sessions are accessible through the request object in each route. You can get and set properties just like you would when handling an object normally. For more: <a href="http://en.wikipedia.org/wiki/Session_(computer_science)">Node.js and Express - Sessions</a>, <a href="https://github.com/kcbanner/connect-mongo">MongoDB session store for Connect</a> and <a href="http://en.wikipedia.org/wiki/Session_(computer_science)">Session (computer science)</a>
			</p>
		</div>
		<div id="tt-template" data-title="Template Engine">
			<p>You can mix and match your view engine of choice that best fits in with your skillset and predilections. THere are many many more if you have other requirements. Go take a look and remember, like any open-source project, be aware of how well they are maintained before betting on them!</p>
			<p>For more: <a href="http://wildermuth.com/2014/03/24/Choose_Your_Own_Adventure_with_Node_js_View_Engines">Choose Your Own Adventure with Node.js View Engines</a></p>
		</div>
		<div id="tt-theme" data-title="Install Theme">
			<p>If you need an initial theme</p>
			<p>For more: <a href="http://getperiodic.com/docs">Getting Started with Periodicjs</a></p>
		</div>
		<div id="tt-admin" data-title="Install Admin">
			<p>If you need the admin interface, and an admin user</p>
			<p>For more: <a href="http://getperiodic.com/docs">Getting Started with Periodicjs</a></p>
		</div>
	</div>
<% include ../shared/footer %>
